<!DOCTYPE HTML>
<html>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<meta http-equiv='refresh' content=''>

<style>
#container
{
width:340px;
height:460px;
margin-left:auto;
margin-right:auto;
border:2px solid black;
background-color:#0080C0;
}
#header
{
color:white;
padding:5px;
text-align:center;
background-color:PaleGoldenRod;
}
#footer
{
clear:both;
margin:5px;
padding:5px;
text-align:right;
color:white;
background-color:#333;
}
input.selected
{
width:60px;
margin-left:10px;
text-align:center;
color:white;
font-family:Verdena, Arial, sans-serif;
font-size:18px;
font-weight:bold;
border:2px solid white;
background-color:blue;
}
input.unselected
{
width:60px;
margin-left:10px;
text-align:center;
color:black;
font-family:Verdena, Arial, sans-serif;
font-size:18px;
background-color:skyblue;
}
h1
{
padding:10px;
margin:0;
text-shadow:-3px 3px 10px rgba(226,227,166,1);
color:#ddd;
background-color:#111;
}
h2
{
margin:5px 5px 5px 5px;
text-align:center;
color:#111;
text-shadow:-1px -1px 2px rgba(215,217,132,1);
font-weight:bold;
background-color:#999;
}
a
{
text-decoration:none;
color:white;
}
#current,#tablespace
{
width:320px;
height:225px;
margin-top:5px;
margin-left:5px;
padding:5px;
background-color:tan;
}
#item-select
{
height:65px;
padding:5px;
background-color:darkslategrey;
}
#item_button
{
border-radius:5px;
width:20px;
height:20px;
margin-left:8px;
margin-top:2px;
text-align:center;
font-family:Verdena, Arial, sans-serif;
font-size:12px;
font-weight:bold;
background-color:lightgrey;
}
#item_button:hover
{
background-color:darkgoldenrod;
border-radius:5px;
}
#tables
{
overflow-y: scroll;
width:320px;
height:225px;
background-color:PaleGoldenRod;
}
#item_value,#item_number,#item_caption,.tbl_value
{
width:27px;
margin-left:5px;
margin-top:3px;
border-radius:5px;
text-align:right;
font-family:Verdena, Arial, sans-serif;
font-size:12px;
font-weight:bold;
background-color:lightgrey;
}
#command_line
{
width:324px;
height:25px;
padding:3px;
margin:5px;
float-left;
border: 1px solid white;
}
</style>
</head>

<body>
<script>
sty();
function sty()
{
var s = document.createElement('STYLE');
t = document.createTextNode('#item_button{width:69px;text-align:center;}');
s.appendChild(t);
document.head.appendChild(s);
}
</script>
<form action='wificonfig' method='POST'>
<div id='container'>
<div id='header'><h1>Vending Machine</h1></div>
<div id='item-select'></div>
<div id='tablespace'>
<input id='' type='hidden' name='txtPage' value='Settings' placeholder=''/>
<div id='tables'></div>
</div>
<div id='command_line'>
<input id='item_button' type='button' name='cmd_test' value='Test' onclick='fD(98)'/>
<input id='item_button' type='button' name='cmd_save' value='Save' onclick='fD(99)'/>
</div>
<div id='footer'>
<input id='item_button' type='submit' name='cmd_submit1' value='Status' formaction='status'/>
<input id='item_button' type='submit' name='cmd_submit2' value='Network' formaction='network'/>
<input id='item_button' type='submit' name='cmd_submit3' value='Logout' formaction='logout'/>
</div>
</div>
<script>

var current_item=2;
var cmd_name = 'fill';

draw_form();
fD(current_item);

function draw_form()
{
var cnt=0;
while(cnt<10)
{
var yy='a'+cnt;
var zz='fD('+cnt+')';
var xx='b'+cnt;
var b=document.createElement('INPUT');
b.setAttribute('type','button');
b.setAttribute('id',xx);
b.setAttribute('class','tbl_value');
if(cnt==current_item)
{
b.setAttribute('style','background-color:tan;');
}
b.setAttribute('value',cnt+1);
b.setAttribute('onclick',zz);
document.getElementById('item-select').appendChild(b);cnt++;
}
cnt=0;
t=document.createElement('INPUT');
t.setAttribute('type','text');
t.setAttribute('id','t0');
t.setAttribute('class','item_caption');
t.setAttribute('style','width:150px;font-size:15px;text-align:center;margin:10px 5px 5px 85px');
document.getElementById('item-select').appendChild(t);
cnt++;
var CR;
var yy;
var yz;
var txtHead = ['CAN1 Hot Water','CAN1 Feed Motor','CAN1 Spin Motor','CAN2 Hot Water','CAN2 Feed Motor','CAN2 Spin Motor','CAN3 Hot Water','CAN3 Feed Motor','CAN3 Spin Motor','Ex. Steam','Ex. Milk','Hot Water'];
var cnt2=0,sr_no=1;
var cnt3=0;
while(sr_no<=12)
{
t=document.createElement('INPUT');
t.setAttribute('type','text');
t.setAttribute('id','item_value');
t.setAttribute('value',sr_no);
t.setAttribute('disabled','true');
t.setAttribute('style','width:12px;text-align:right;');
document.getElementById('tables').appendChild(t);
sr_no++;
cnt2=0;
while(cnt2<5)
{
yy='t'+cnt;
t=document.createElement('INPUT');
t.setAttribute('type','text');
t.setAttribute('class','tbl_value');
if(cnt2==0)
{
yz='c'+cnt3;
t.setAttribute('style','width:105px;text-align:left;');
t.setAttribute('disabled','true');
t.setAttribute('value',txtHead[cnt3]);
t.setAttribute('id',yz);
cnt3++;
}
else
{
t.setAttribute('id',yy);
t.setAttribute('value',cnt);
cnt++;
}
document.getElementById('tables').appendChild(t);

cnt2++;
}
CR=document.createElement('BR');
document.getElementById('tables').appendChild(CR);
}
}

function sD(cx)
{
const xhttp=new XMLHttpRequest();
xhttp.onload=function()
{
var VArr;
var response=this.responseText;
if((cmd_name=='fill')||(cmd_name=='cancel')||(cmd_name=='default'))
{
VArr = response.split(',');
while(cnt<48)
{
var yy = 't' + cnt;
document.getElementById(yy).value = VArr[cnt];
cnt++;
}
}
}
xhttp.open('POST', 'postData');
xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
var cnt=0;

var sendData= 'Cmd_Name=';
sendData+=cmd_name;
sendData+='&ItemNo=';
sendData+=cx;
sendData+='&ItemData=';
if(cmd_name=='save')
{
while(cnt<48)
{
var yy='t'+cnt;
sendData+=document.getElementById(yy).value;
sendData+=',';
cnt++;
}
}
xhttp.send(sendData);
}

function fD(cx)
{
var zz = 'b'+current_item;
if(cx==99)
{cmd_name='save';
cx=current_item;}
else
{cmd_name='fill';}
document.getElementById(zz).style = 'background-color:lightgrey;';
zz = 'b'+cx;
document.getElementById(zz).style = 'background-color:tan;';
current_item = cx;
sD(cx);
}

</script>
</form>
</body>
</html>